<!DOCTYPE html><html class="no-js"><head><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="twitter:card" content="summary" /><meta name="robots" content="noindex" /><meta property="og:title" content="Network-useProxy - Unity Scripting API" /><title>Network-useProxy - Unity Scripting API</title><meta name="description" content="指示是否需要代理支持，在这种情况下，流量将通过代理服务器中继。" /><meta property="og:description" content="指示是否需要代理支持，在这种情况下，流量将通过代理服务器中继。" /><meta name="author" content="Unity Technologies" /><link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico" /><link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png" /><link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" /><link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" /><link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" /><link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" /><link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" /><link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" /><meta name="msapplication-TileColor" content="#222c37" /><meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" /><script>
      var docs_type = 'ScriptReference';
      var lang = 'zh_CN';
      var page = 'Network-useProxy';
      if(!page) page = 'index';
      var version = '2019.1';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" /><link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css" /></head><body><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="header-wrapper"><div id="header" class="header"><div class="content"><div class="spacer"><div class="menu"><div id="nav-open" for="nav-input"><span></span></div><div class="logo"><a href="https://docs.unity3d.com"></a></div><div class="search-form"><form action="30_search.html" method="get" class="apisearch"><input type="text" name="q" placeholder="Search scripting..." autosave="Unity Reference" results="5" class="sbox field" id="q"></input><input type="submit" class="submit"></input></form></div><ul class="menu-items"><li class="menu-item"><a href="../Manual/index.html" class="">Manual</a></li><li class="menu-item"><a href="../ScriptReference/index.html" class="selected">Scripting API</a></li></ul></div></div><div class="more"><div class="filler"></div><ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul></div></div></div><div class="toolbar"><div class="content"><div class="version-switcher"><div class="current toggle" data-target=".version-list"><div class="version-number"><div class="d-inline-block">
          Version:
          <b>2019.1</b></div><div class="d-inline-block arrow"></div></div></div><div class="version-list" style="display:none;"><ul><li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/ScriptReference/Network-useProxy.html">2019.3</a></li><li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/ScriptReference/Network-useProxy.html">2019.2</a></li><li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/ScriptReference/Network-useProxy.html">2019.1</a></li><li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/ScriptReference/Network-useProxy.html">2018.4</a></li><li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/ScriptReference/Network-useProxy.html">2018.3</a></li><li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/ScriptReference/Network-useProxy.html">2018.2</a></li><li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/ScriptReference/Network-useProxy.html">2018.1</a></li><li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/ScriptReference/Network-useProxy.html">2017.4</a></li><li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/ScriptReference/Network-useProxy.html">2017.3</a></li><li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/ScriptReference/Network-useProxy.html">2017.2</a></li><li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/ScriptReference/Network-useProxy.html">2017.1</a></li><li><a class="docs_version_url_560" href="/zh_CN/560/ScriptReference/Network-useProxy.html">5.6</a></li></ul></div></div><ul class="nav-menu-items"><li class="menu-item"><a href="../Manual/index.html" class="">Manual</a></li><li class="menu-item"><a href="../ScriptReference/index.html" class="selected">Scripting API</a></li></ul><div class="lang-switcher"><div class="current toggle" data-target=".lang-list"><div class="lbl">Language:
        <span class="b">中文</span></div><div class="arrow"></div></div><div class="lang-list" style="display:none;"><ul><li><a data-lang="en" href="/2019.1/Documentation/ScriptReference/Network-useProxy.html">English</a></li><li><a data-lang="ja" href="/ja/2019.1/ScriptReference/Network-useProxy.html">日本語</a></li><li><a data-lang="es" href="/es/2019.1/ScriptReference/Network-useProxy.html">Español</a></li><li><a data-lang="kr" href="/kr/2019.1/ScriptReference/Network-useProxy.html">한국어</a></li></ul></div></div></div></div></div><div id="master-wrapper" class="master-wrapper clear"><div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Scripting API</h2><div class="version-switcher"><div class="current toggle" data-target=".version-list"><div class="version-number"><div class="d-inline-block">
          Version:
          <b>2019.1</b></div><div class="d-inline-block arrow"></div></div></div><div class="version-list" style="display:none;"><ul><li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/ScriptReference/Network-useProxy.html">2019.3</a></li><li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/ScriptReference/Network-useProxy.html">2019.2</a></li><li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/ScriptReference/Network-useProxy.html">2019.1</a></li><li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/ScriptReference/Network-useProxy.html">2018.4</a></li><li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/ScriptReference/Network-useProxy.html">2018.3</a></li><li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/ScriptReference/Network-useProxy.html">2018.2</a></li><li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/ScriptReference/Network-useProxy.html">2018.1</a></li><li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/ScriptReference/Network-useProxy.html">2017.4</a></li><li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/ScriptReference/Network-useProxy.html">2017.3</a></li><li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/ScriptReference/Network-useProxy.html">2017.2</a></li><li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/ScriptReference/Network-useProxy.html">2017.1</a></li><li><a class="docs_version_url_560" href="/zh_CN/560/ScriptReference/Network-useProxy.html">5.6</a></li></ul></div></div><div class="clear"></div></div></div></div></div></div><div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content"><div class="section"><div class="mb20 clear" id=""><div class="message message-error mb20"><b>Removed
                </b><br /></div><h1 class="heading inherit"><a href="Network.html">Network</a>.useProxy</h1><div class="clear"></div><div class="clear"></div><a href="" class="switch-link gray-btn sbtn left hide">Switch to Manual</a><div class="clear"></div></div><div class="subsection"><div class="signature"><div class="signature-CS sig-block"><span style="color:red;">Obsolete </span>public static bool <span class="sig-kw">useProxy</span>
        ;
      </div></div></div><div class="subsection"><h2>Description</h2><p>指示是否需要代理支持，在这种情况下，流量将通过代理服务器中继。</p></div><div class="subsection"><p>代理服务器是应对服务器及客户端连接问题的
一种解决方案。当用户运行的机器所连接的路由器不具备 NAT 穿透能力，
其在连接方面的选择将受到限制。这样会导致其无法
托管游戏，因为局域网之外的任何玩家都无法与其建立连接。
通过使用代理服务器，该机器可完全具备连接能力，
但额外的代价是所有流量必须通过另一台服务器进行中继。
只要正确设置了代理服务器，不具备 NAT 穿透能力的客户端
可通过代理服务器连接到任何服务器。<br /><br />Unity Technologies 不提供公开使用的代理服务器，
因此必须自行建立代理服务器方可使用这一功能。当然，
建议使用公共 IP 地址建立代理服务器并
具备足够的带宽。<br /><br />When running as a client, just enabling Network.useProxy is all you have
to do. Connect to the server as usual with Network.Connect(). All traffic
will be relayed through the proxy server. The servers external IP and internal
IP still work as usual. So clients can connect to them directly without
the proxy in case they are located on the same network.<br /><br />当作为服务器运行时，OnServerInitialized(NetworkPlayer) 返回一个
 NetworkPlayer 结构，其中包含中继游戏服务器的 IP/端口，
即代理服务器分配给游戏服务器的端口。
其他人可使用该 IP/端口进行连接。当连接到服务器时，
客户端对待该服务器的方式与其他服务器完全相同。
从技术角度讲，客户端不需要知道
游戏服务器是否经过了代理服务器的帮助。<br /><br />当使用主服务器时，有了代理支持，您不必仅依赖
为该服务器注册的 IP/端口。可将该服务器使用的
代理服务器的 IP 地址和端口填入发送给主服务器的
数据的 comment 字段中。从主服务器接收主机信息的客户端
可查看 comment 字段并了解是否可以
使用该主机的备用 IP/端口。<br /><br />重要信息：不得对服务器和与之连接的客户端
均使用代理支持。否则，意外情况将不可避免。</p></div></div><div class="footer-wrapper"><div class="footer clear"><div class="copy">Copyright © 2019 Unity Technologies. Publication 2019.1</div><div class="menu"><a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a></div></div><div></div></div></div></div></div></div></body></html>