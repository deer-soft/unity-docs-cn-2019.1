<!DOCTYPE html><html class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="Android 清单 - Unity Manual">
<title>Android 清单 - Unity Manual</title>
<meta name="description" content="Android 清单是一个 XML 文件，其中包含有关 Android 应用程序的重要元数据。此文件包含包名称、活动名称、主活动（应用程序的入口点）、配置、Android 版本支持、硬件功能支持和权限。">
<meta property="og:description" content="Android 清单是一个 XML 文件，其中包含有关 Android 应用程序的重要元数据。此文件包含包名称、活动名称、主活动（应用程序的入口点）、配置、Android 版本支持、硬件功能支持和权限。">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'android-manifest';
      if(!page) page = 'index';
      var version = '2019.1';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/android-manifest.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/android-manifest.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/android-manifest.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/android-manifest.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/android-manifest.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/android-manifest.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/android-manifest.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/android-manifest.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/android-manifest.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/android-manifest.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/android-manifest.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/android-manifest.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2019.1/Documentation/Manual/android-manifest.html">English</a></li>
<li><a data-lang="ja" href="/ja/2019.1/Manual/android-manifest.html">日本語</a></li>
<li><a data-lang="es" href="/es/2019.1/Manual/android-manifest.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2019.1/Manual/android-manifest.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/android-manifest.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/android-manifest.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/android-manifest.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/android-manifest.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/android-manifest.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/android-manifest.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/android-manifest.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/android-manifest.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/android-manifest.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/android-manifest.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/android-manifest.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/android-manifest.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.1)</a></li>
<li><a href="PlatformSpecific.html">特定于平台的信息</a></li>
<li><a href="android.html">Android</a></li>
<li>Android 清单</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="android-gradle-troubleshooting.html"></a></span><div class="tip">Gradle 故障排除</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-RequestingPermissions.html"></a></span><div class="tip">Requesting Permissions</div>
</div>
</div></div>
<h1>Android 清单</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Android 清单是一个 XML 文件，其中包含有关 Android 应用程序的重要元数据。此文件包含包名称、活动名称、主活动（应用程序的入口点）、配置、Android 版本支持、硬件功能支持和权限。</p>

<p>有关 Android 清单文件的更多信息，请参阅有关 <a href="https://developer.android.com/guide/topics/manifest/manifest-intro.html">Android 清单 (Android Manifests)</a> 的 Android 开发者文档。</p>

<h2>Unity 如何生成 Android 清单</h2>

<p>在构建应用程序时，Unity 会按照以下步骤自动生成 Android 清单：</p>

<p>1.Unity 采用主 Android 清单。</p>

<p>2.Unity 查找插件（AAR 和 Android 库）的所有 Android 清单。</p>

<p>3.来自插件的清单通过 Google 的 <a href="https://android.googlesource.com/platform/sdk/+/0386f5d/manifmerger">manifmerger</a> 类合并到主清单中。</p>

<p>4.Unity 修改清单，自动向清单添加权限、配置选项、使用的功能以及其他信息。</p>

<h2>覆盖 Android 清单</h2>

<p>尽管 Unity 会为您生成正确的清单，但在某些情况下，您可能希望直接控制其内容。</p>

<p>要使用您在 Unity 之外创建的 Android 清单，请将 Android 清单文件导入以下位置：_Assets/Plugins/Android/AndroidManifest.xml_。这将覆盖默认的由 Unity 创建的清单。</p>

<p>在这种情况下，Android 库的清单随后将合并到主清单中，得到的清单仍由 Unity 进行调整以确保配置正确。要完全控制清单（包括权限），必须导出项目并在 <a href="https://developer.android.com/studio/index.html?gclid=CPbCm_HwptICFVXnGwodghYK5w">Android Studio</a> 中修改最终的清单。请注意，我们仅支持 <a href="https://developer.android.com/guide/topics/manifest/activity-element.html#lmode"><em>launchMode - singleTask</em></a>。</p>

<h2>权限</h2>

<p>Unity automatically adds the necessary permissions to the Manifest based on the <a href="class-PlayerSettingsAndroid.html">Android Player</a> settings and Unity APIs that your app calls from the script. For example:</p>

<ul>
<li><p><a href="../ScriptReference/Network.html">Network</a> 类添加 <code>INTERNET</code> 权限</p></li>
<li><p>使用振动（例如 <a href="../ScriptReference/Handheld.Vibrate.html">Handheld.Vibrate</a>）将添加 <code>VIBRATE</code></p></li>
<li><p><a href="../ScriptReference/Application-internetReachability.html">InternetReachability</a> 属性添加 <code>ACCESS_NETWORK_STATE</code></p></li>
<li><p>位置 API（如 <a href="../ScriptReference/LocationService.html">LocationService</a>）添加 <code>ACCESS_FINE_LOCATION</code></p></li>
<li><p><a href="../ScriptReference/WebCamTexture.html">WebCamTexture</a> API 添加 <code>CAMERA</code> 权限</p></li>
<li><p><a href="../ScriptReference/Microphone.html">Microphone</a> 类添加 <code>RECORD_AUDIO</code></p></li>
<li><p><a href="../ScriptReference/Networking.NetworkDiscovery.html">NetworkDiscovery</a> and <a href="../ScriptReference/Networking.NetworkTransport.SetMulticastLock.html">NetworkTransport.SetMulticastLock</a> adds <code>CHANGE_WIFI_MULTICAST_STATE</code></p></li>
</ul>

<p>有关权限的更多信息，请参阅 Android 开发者文档的 <a href="https://developer.android.com/guide/topics/manifest/manifest-intro.html#perms">Android 清单权限 (Android Manifest Permissions)</a> 页面。</p>

<p>请注意，如果插件通过在其清单中声明权限来请求权限，则在合并阶段会自动将权限添加到生成的 Android 清单中。插件调用的所有 Unity API 也会对权限列表有影响。</p>

<h2>Android 6.0 (Marshmallow) 中的运行时权限</h2>

<p>如果应用程序在 Android 6.0 (Marshmallow) 或更高版本的设备上运行，并且还以 Android API 级别 23 或更高级别为目标，则该应用程序会使用 <a href="https://developer.android.com/training/permissions/requesting.html">Android 运行时权限系统 (Runtime Permission System)</a>。</p>

<p>The Android Runtime Permission System asks the app’s user to grant permissions while the app is running, instead of when the app is first installed. App users can usually grant or deny each permission when the app needs them while the app is running (for example, requesting camera permission before taking a picture). This allows an app to run with limited functionality without permissions. The <a href="../ScriptReference/Android.Permission.html">Android.Permission</a> class allows you to check whether specific permissions have been granted or denied. If a permission your app relies upon has been denied, you can inform the user why you need it and ask them to approve the permission. See <a href="android-RequestingPermissions.html">Requesting Permissions</a>.</p>

<p>Normally, your app prompts the user to allow what Android calls “dangerous” permissions on startup. See Android’s documentation on <a href="https://developer.android.com/guide/topics/permissions/requesting.html">dangerous permissions</a> for more information. However, if you don’t want your Unity Android app to ask for permissions on startup, you can add the following to your Manifest in either the <strong>Application</strong> or <strong>Activity</strong> sections.</p>

<pre><code>&lt;meta-data android:name="unityplayer.SkipPermissionsDialog" android:value="true" /&gt; 

</code></pre>

<p>添加此代码会完全禁止启动时显示权限对话框，但您必须小心处理运行时权限以避免崩溃。此方法仅适用于高级 Android 应用程序开发者。</p>

<p>有关运行时权限系统和权限处理的更多信息，请参阅 Android 开发者文档的<a href="https://developer.android.com/training/permissions/requesting.html">请求权限 (Requesting Permissions)</a> 部分。</p>

<h2>检查生成的 Android 清单</h2>

<p>要检查 Unity 为应用程序生成的最终 Android 清单，请在构建项目之后但在退出 Unity Editor 之前打开 <em>Temp/StagingArea/AndroidManifest.xml</em> 文件。</p>

<p>清单以二进制格式存储在输出包 (APK) 中。要检查 APK 中的清单内容，可使用 <a href="https://developer.android.com/studio/build/apk-analyzer.html">Android Studio APK Analyzer</a> 或其他第三方工具（例如 <a href="https://ibotpeaches.github.io/Apktool/">Apktool</a>）。</p>

<hr>

<ul>
<li><p><span class="page-edit">2018–10–05 Page published with <a href="DocumentationEditorialReview.html">editorial review</a>
</span></p></li>
<li><p><span class="page-history">5.5 版中的更新功能</span></p></li>
<li><p><span class="page-history">Added support for Android Runtime Permissions in 2018.3.</span></p></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="android-gradle-troubleshooting.html"></a></span><div class="tip">Gradle 故障排除</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-RequestingPermissions.html"></a></span><div class="tip">Requesting Permissions</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2019 Unity Technologies. Publication 2019.1</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
