<!DOCTYPE html><html class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="使用预计算光照 - Unity Manual">
<title>使用预计算光照 - Unity Manual</title>
<meta property="og:image" content="https://docs.unity3d.com/zh_CN/2019.1/uploads/GlobalIllumination/BakingJobs.png">
<meta name="description" content="在 Unity 中，预计算光照在后台计算为自动过程或手动启动时进行计算。在这两种情况下，都可以在 Editor 中继续工作，同时让这些过程在后台运行。">
<meta property="og:description" content="在 Unity 中，预计算光照在后台计算为自动过程或手动启动时进行计算。在这两种情况下，都可以在 Editor 中继续工作，同时让这些过程在后台运行。">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'UsingPrecomputedLighting';
      if(!page) page = 'index';
      var version = '2019.1';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/UsingPrecomputedLighting.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/UsingPrecomputedLighting.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/UsingPrecomputedLighting.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/UsingPrecomputedLighting.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/UsingPrecomputedLighting.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/UsingPrecomputedLighting.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/UsingPrecomputedLighting.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/UsingPrecomputedLighting.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/UsingPrecomputedLighting.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/UsingPrecomputedLighting.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/UsingPrecomputedLighting.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/UsingPrecomputedLighting.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2019.1/Documentation/Manual/UsingPrecomputedLighting.html">English</a></li>
<li><a data-lang="ja" href="/ja/2019.1/Manual/UsingPrecomputedLighting.html">日本語</a></li>
<li><a data-lang="es" href="/es/2019.1/Manual/UsingPrecomputedLighting.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2019.1/Manual/UsingPrecomputedLighting.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/UsingPrecomputedLighting.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/UsingPrecomputedLighting.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/UsingPrecomputedLighting.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/UsingPrecomputedLighting.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/UsingPrecomputedLighting.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/UsingPrecomputedLighting.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/UsingPrecomputedLighting.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/UsingPrecomputedLighting.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/UsingPrecomputedLighting.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/UsingPrecomputedLighting.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/UsingPrecomputedLighting.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/UsingPrecomputedLighting.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.1)</a></li>
<li><a href="Graphics.html">图形</a></li>
<li><a href="GraphicsOverview.html">图形概述</a></li>
<li><a href="LightingOverview.html">光照</a></li>
<li><a href="GIIntro.html">全局光照</a></li>
<li><a href="Lightmappers.html">Lightmapping</a></li>
<li><a href="GI-Enlighten.html">Enlighten</a></li>
<li>使用预计算光照</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="GI-Enlighten.html"></a></span><div class="tip">Enlighten</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="LODRealtimeGI.html"></a></span><div class="tip">LOD（细节级别）和实时 GI（全局光照）</div>
</div>
</div></div>
<h1>使用预计算光照</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>在 Unity 中，预计算光照在后台计算为自动过程或手动启动时进行计算。在这两种情况下，都可以在 Editor 中继续工作，同时让这些过程在后台运行。</p>

<p>预计算过程运行时，Editor 右下角会出现一个蓝色进度条。根据是否启用 Baked GI 或 Precomputed Realtime GI，需要完成不同的阶段。有关当前过程的信息会显示在进度条上。</p>

<figure>
<img src="../uploads/GlobalIllumination/BakingJobs.png" alt="">
</figure>

<p>进度条显示 Unity 的预计算的当前状态。</p>

<p>在上面的示例中，我们可以看到目前处于 11 个任务中的第 5 个任务，即“聚类”(Clustering)，在该任务完成并在预计算转到第 6 个任务之前还剩余 6 个作业。下面列出了各个阶段：</p>

<p><strong>预计算实时全局光照 (Precomputed Realtime GI)</strong></p>

<p>1.创建几何体 (Create Geometry)
2.布局系统 (Layout Systems)
3.创建系统 (Create Systems)
4.创建图集 (Create Atlas)
5.聚类（Clustering）
6.可见性 (Visibility)
7.光线传输 (Light Transport)
8.四面体化探针 (Tetrahedralize Probes)
9.创建探针集 (Create ProbeSet)</p>

<p><strong>探针 (Probes)</strong></p>

<p>1.环境探针 (Ambient Probes)
2.烘焙/实时参考探针 (Baked/Realtime Ref. Probes)</p>

<p><strong>烘焙 GI (Baked GI)</strong></p>

<p>1.创建几何体 (Create Geometry)
2.镶嵌 (Atlassing)
3.创建烘焙系统 (Create Baked Systems)
4.烘焙资源 (Baked Resources)
5.烘焙 AO (Bake AO)
6.导出烘焙纹理 (Export Baked Texture)
7.烘焙可见性 (Bake Visibility)
8.烘焙直接光照 (Bake Direct)
9.环境光和发光 (Ambient and Emissive)
10.创建烘焙系统 (Create Bake Systems)
11.烘焙运行时 (Bake Runtime)
12.上采样可见性 (Upsampling Visibility)
13.烘焙间接光照 (Bake Indirect)
14.最终收集 (Final Gather)
15.烘焙探针集 (Bake ProbesSet)
16.合成 (Compositing)</p>

<h2>开始预计算</h2>

<p>Unity 的预计算光照解决方案仅考虑静态几何体。要开始光照预计算过程，我们需要在场景中至少将一个游戏对象标记为“静态”。为此，可单独对某个游戏对象执行此操作，也可按住 Shift 键并从层级视图面板中选择多个游戏对象来执行此操作。</p>

<p>从 Inspector 面板中，可选中 Static 复选框 (<strong>Inspector &gt; Static</strong>)。此操作将设置所有游戏对象的“静态选项”或“标志”（包括导航和批处理），这可能是不可取的。对于 Precomputed Realtime GI，仅需选中“Lightmap Static”。</p>

<p>为了实现更精细的控制，可从 Inspector 面板 Static 复选框右侧可访问的下拉列表中设置各个静态选项。此外，还可在 Lighting 窗口的 Object 区域中将对象设置为 Static。</p>

<p>If you set your Scene to <strong>Auto Generate</strong> (menu: <strong>Window</strong> &gt; <strong>Rendering</strong> &gt; <strong>Lighting Settings</strong> &gt; <strong>Scene</strong> &gt; <strong>Auto Generate</strong>), Unity’s lighting precompute begins automatically, and updates automatically when any static geometry in your Scene changes. If you do not enable <strong>Auto Generate</strong>, you must start the lighting precompute manually.</p>

<h2>自动/手动预计算</h2>

<p>If you have checked <strong>Auto Generate</strong> in the bottom of Unity’s Lighting panel (menu: <strong>Window</strong> &gt; <strong>Rendering</strong> &gt; <strong>Lighting Settings</strong> &gt; <strong>Scene</strong> &gt; <strong>Auto Generate</strong>), this precompute begins automatically as a background process whenever the static geometry within your Scene changes.</p>

<p>但是，如果未启用 __Auto Generate__，必须手动启动光照预计算过程，方法是单击其旁边的“Build”按钮。这样就会以相同的方式开始预计算，并可让您控制此过程的开始时间。</p>

<p><strong>Auto Generate</strong> 在处理较小或较不复杂的场景时非常有用，因为它能在您移动或编辑场景中的静态游戏对象时快速生成准确的光照效果。但是，在处理大型或复杂场景时，您可能更愿意切换到手动选项，这样计算机就不会出现高 CPU 使用率，并避免每次修改场景时都会反复重新启动光照预计算。</p>

<p>When you manually initiate a precompute, all aspects of your Scene lighting are evaluated and computed. To recalculate and bake just the <a href="class-ReflectionProbe.html">Reflection Probes</a> by themselves, click the drop-down menu attached to the <strong>Generate Lighting </strong>button (menu: <strong>Window</strong> &gt; <strong>Lighting Settings</strong> &gt; <strong>Scene</strong> &gt; <strong>Generate Lighting</strong>) and select <strong>Bake Reflection Probes</strong>. </p>

<p><strong>注意：</strong>使用 <strong>Auto Generate</strong> 模式时，Unity 会将您的光照数据存储在有限大小的临时缓存中。这意味着，当超出缓存的大小时，Unity 会删除旧的光照数据。如果某些场景依赖于已删除的自动生成的光照数据，则在构建项目时可能会出现问题。在这种情况下，您的场景可能在构建的项目中没有正确的光照。因此，在构建游戏之前，应取消选中 __Auto Generate__，并手动为所有场景生成光照数据。Unity 随后会将您的光照数据作为资源文件保存在项目文件夹中，这意味着数据将保存为项目的一部分并包含在您的构建版本中。</p>

<h2>启用 Baked GI 或 Realtime GI</h2>

<p>Unity 在默认情况下启用 <strong>Baked GI</strong> 和 <strong>Realtime GI</strong>。<strong>Baked GI</strong> 全部预先计算好；__Realtime GI__ 在使用间接光照的情况下会执行一些预计算。启用这两个选项后，即可使用场景中的每个光源来控制应使用的 GI 系统（在光源组件中应使用 <strong>Mode</strong> 设置来执行此操作）。请参阅有关 <a href="GlobalIllumination.html">Lighting 窗口</a>和<a href="GIIntro.html">全局光照</a>的文档以了解更多信息。</p>

<p>使用光照系统最灵活的方式是将 <strong>Baked GI</strong> 和 <strong>Realtime GI</strong> 一起使用。然而，这也是性能成本最高的选择。为了减少游戏的资源消耗，可选择禁用 <strong>Realtime GI</strong> 或 <strong>Baked GI</strong>。请注意，这样做会降低光照系统的灵活性和功能。</p>

<p>To manually enable or disable Global Illumination, open the Lighting window (<strong>Window</strong> &gt; <strong>Lighting Settings</strong> &gt; <strong>Scene</strong>). Tick <strong>Realtime Global Illumination</strong> to enable <strong>Realtime GI</strong>, and tick <strong>Baked Global Illumination</strong> to enable <strong>Baked GI</strong>. Untick these checkboxes to disable the respective GI system. If any Lights are set to the mode you have disabled, they are are overridden and set to the active GI system.</p>

<h2>每个光源的设置</h2>

<p>要设置每个光源的属性，请在 Scene 或 Hierarchy 窗口中选择该光源，然后在 Inspector 窗口中编辑该<a href="class-Light.html">光源组件</a>的设置。</p>

<p>每个光源的默认 <strong>Mode</strong> 设置为 <strong>Dynamic</strong>。这意味着该光源为场景提供直接光照，并由 Unity 的 <strong>Realtime GI</strong> 处理间接光照。</p>

<p>如果光源的 <strong>Mode</strong> 设置为 <strong>Static__，则该光源仅为 Unity 的 </strong>Baked GI__ 系统提供光照。这些光源的直接光照和间接光照都被烘焙为光照贴图，并且在游戏过程中无法更改此设置。</p>

<p>If you set the Light’s <strong>Mode</strong> to <strong>Stationary</strong>, GameObjects marked as <strong>Static</strong> still include this light in their <strong>Baked GI</strong> light maps. However, unlike Lights marked as <strong>Static</strong>, <strong>Stationary</strong> Lights still contribute real-time lighting, based on the stationary bake mode in the Lighting window (menu: <strong>Window</strong> &gt; <strong>Lighting Settings</strong>). This is useful if you are using light maps in a static environment, but you still want a good integration between dynamic and light map static geometry.</p>

<figure>
<img src="../uploads/GlobalIllumination/LightBakingType.png" alt="Mode 设置为 Dynamic 的方向光。">
<figcaption><strong>Mode</strong> 设置为 <strong>Dynamic</strong> 的方向光。</figcaption>
</figure>

<p>请参阅有关<a href="https://docs.google.com/document/d/116JvLXljfbdfllOLlyzVvWmNWpbUwcYKV16blVHuS2E/edit?usp=sharing">光照模式</a>的文档以了解更多详细信息。</p>

<h2>GI 缓存</h2>

<p>在 Baked GI 或 Precomputed Realtime GI 中，Unity 会在“GI 缓存”(GI Cache) 中缓存（存储）有关场景光照的数据，并会尽可能重复使用这些数据，以便在预计算期间节省时间。您对场景所做更改的数量和性质将决定可以重复使用的数据量（如果有的话）。</p>

<p>此缓存会存储在 Unity 项目之外，可使用 (<strong>Preference</strong> &gt; <strong>GI Cache</strong> &gt; <strong>Clear Cache</strong>) 将其清除。清除此缓存意味着需要从头开始重新计算预计算的所有阶段，因此可能会很耗时。但是，在某些情况下，您可能需要减少磁盘使用量，此操作可能就会有所帮助。</p>

<h2>烘焙 GI 的 LOD（细节级别）</h2>

<p>Unity 在生成烘焙光照贴图时会考虑细节级别。直接光照是用所有 LOD 的实际表面进行计算的。较低的 LOD 级别使用光照探针来获取间接光照。生成的光照将烘焙到光照贴图中。</p>

<p>这意味着，您应该在 LOD 周围放置光照探针以捕获间接光照。如果您使用完全烘焙的 GI，则对象在运行时不会使用光照探针。</p>

<hr>

<ul>
<li><p><span class="page-edit"> 2017–06–08 Page published with limited <a href="DocumentationEditorialReview.html">editorial review</a>
</span></p></li>
<li><p><span class="page-history">在 5.6 版中添加了“光照模式”</span></p></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="GI-Enlighten.html"></a></span><div class="tip">Enlighten</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="LODRealtimeGI.html"></a></span><div class="tip">LOD（细节级别）和实时 GI（全局光照）</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2019 Unity Technologies. Publication 2019.1</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
