<!DOCTYPE html><html class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="WebGL：部署压缩构建 - Unity Manual">
<title>WebGL：部署压缩构建 - Unity Manual</title>
<meta name="description" content="When you build a WebGL project in release mode (see Publishing builds), Unity compresses your build output files to reduce the download size of your build. You can choose the type of compression it uses from the Compression Format options in Publishing Settings (menu: Edit &gt; Project Settings, then select the Player category, and then navigate to the Publishing Settings panel):">
<meta property="og:description" content="When you build a WebGL project in release mode (see Publishing builds), Unity compresses your build output files to reduce the download size of your build. You can choose the type of compression it uses from the Compression Format options in Publishing Settings (menu: Edit &gt; Project Settings, then select the Player category, and then navigate to the Publishing Settings panel):">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'webgl-deploying';
      if(!page) page = 'index';
      var version = '2019.1';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/webgl-deploying.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/webgl-deploying.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/webgl-deploying.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/webgl-deploying.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/webgl-deploying.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/webgl-deploying.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/webgl-deploying.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/webgl-deploying.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/webgl-deploying.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/webgl-deploying.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/webgl-deploying.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/webgl-deploying.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2019.1/Documentation/Manual/webgl-deploying.html">English</a></li>
<li><a data-lang="ja" href="/ja/2019.1/Manual/webgl-deploying.html">日本語</a></li>
<li><a data-lang="es" href="/es/2019.1/Manual/webgl-deploying.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2019.1/Manual/webgl-deploying.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/webgl-deploying.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/webgl-deploying.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/webgl-deploying.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/webgl-deploying.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/webgl-deploying.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/webgl-deploying.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/webgl-deploying.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/webgl-deploying.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/webgl-deploying.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/webgl-deploying.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/webgl-deploying.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/webgl-deploying.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.1)</a></li>
<li><a href="PlatformSpecific.html">特定于平台的信息</a></li>
<li><a href="webgl.html">WebGL</a></li>
<li><a href="webgl-gettingstarted.html">WebGL 开发入门</a></li>
<li>WebGL：部署压缩构建</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-building.html"></a></span><div class="tip">构建和运行 WebGL 项目</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="webgl-debugging.html"></a></span><div class="tip">Debugging and troubleshooting WebGL builds</div>
</div>
</div></div>
<h1>WebGL：部署压缩构建</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>When you build a WebGL project in release mode (see <a href="PublishingBuilds.html">Publishing builds</a>), Unity compresses your build output files to reduce the download size of your build. You can choose the type of compression it uses from the Compression Format options in Publishing Settings (menu: <strong>Edit</strong> &gt; <strong>Project Settings</strong>, then select the <strong>Player</strong> category, and then navigate to the <strong>Publishing Settings</strong> panel):</p>

<ul>
<li><p>__gzip__：这是默认选项。gzip 文件比 Brotli 文件更大，但构建速度更快，且所有浏览器都基于 http 和 https 实现此格式的本机支持。</p></li>
<li><p>__Brotli__：Brotli 压缩提供最佳压缩比。Brotli 压缩文件明显小于 gzip，但需要很长的压缩时间，因此增加了发布版本的迭代时间。Chrome 和 Firefox 基于 https 实现对 Brotli 压缩的本机支持（请参阅 <a href="webgl-browsercompatibility.html">WebGL 浏览器兼容性</a>以了解更多信息）。</p></li>
<li><p>__Disabled__：此选项禁用压缩。如果要在后期处理脚本中实现您自己的压缩，请使用此选项。</p></li>
</ul>

<p>压缩构建的 Unity 构建可在任何浏览器上工作。Unity 包含一个用 JavaScript 编写的软件解压缩程序；当服务器未启用 http 传输级别的压缩时，可回退到此解压缩程序。</p>

<h2>高级：本机浏览器解压缩</h2>

<p>浏览器可在下载构建数据时在本机处理 Unity 构建的解压缩。这样做的好处是可避免因在 JavaScript 中解压缩文件而导致的额外延迟，从而缩短启动时间。要让浏览器在本机处理解压缩，必须配置 Web 服务器以使用适当的 http 标头提供压缩文件：这些头告诉浏览器该数据是使用 gzip 或 Brotli 压缩的，因此浏览器在传输数据时对数据进行解压缩。Brotli 压缩仅在基于 https 的情况下受到 Firefox 和 Chrome 的支持，而 gzip 压缩受到所有浏览器的支持。请参阅 <a href="webgl-browsercompatibility.html">WebGL 浏览器兼容性</a>以了解更多信息。</p>

<h2>设置 Web 服务器</h2>

<p>本机浏览器解压缩的设置过程取决于 Web 服务器。本页面上的说明适用于两种最常见的 Web 服务器：__Apache__ 和 <strong>IIS</strong>。请注意，这些说明应该适用于默认设置，但可能需要进行调整以符合具体配置。具体而言，如果已使用其他服务器端配置来压缩托管的文件（这可能会干扰此设置），可能会出现问题。基本思想是在服务器响应中附加 <em>Content-Encoding</em> 标头（对应于构建时使用的压缩类型）。这将允许浏览器在下载期间在本机和异步执行解压缩。</p>

<h3>Apache</h3>

<p>Apache 服务器使用不可见的 <em>.htaccess</em> 文件实现服务器配置。下面的代码显示了可用于强制执行本机浏览器解压缩的 <em>.htaccess</em> 文件的示例。请注意，Apache 服务器配置设置是可选的。</p>

<p>对于 gzip 压缩的构建，请将以下 <em>.htaccess</em> 文件放入 <em>Build</em> 子文件夹：</p>

<pre><code>&lt;IfModule mod_mime.c&gt;
  AddEncoding gzip .unityweb
&lt;/IfModule&gt;
</code></pre>

<p>对于 brotli 压缩的构建，请将以下 <em>.htaccess</em> 文件放入 <em>Build</em> 子文件夹：</p>

<pre><code>&lt;IfModule mod_mime.c&gt;
  AddEncoding br .unityweb
&lt;/IfModule&gt;
</code></pre>

<h2>IIS</h2>

<p><strong>必要的 IIS 服务器配置步骤：</strong></p>

<p>默认情况下，IIS 服务器不提供未知 MIME 类型的静态内容。为了使 Unity 构建能够在 IIS 上工作，首先需要将 <em>.unityweb</em> 扩展名与 <em>application/octet-stream</em> 内容类型相关联。有两种方法可以实现该目的：</p>

<p><em>使用 IIS Manager 界面：</em>
在 IIS Manager 面板中选择您的网站，打开 <em>MIME Types</em> 功能，然后选择 <em>Add…</em> 操作。将 <em>.unityweb</em> 设置为文件扩展名，并将 <em>application/octet-stream</em> 设置为 MIME 类型，然后单击 <em>OK</em>。</p>

<p><em>使用服务器配置文件：</em>
IIS 使用 <em>web.config</em> 文件实现服务器配置。这些配置文件反映了 IIS Manager 中针对特定文件夹所做的所有更改。为了将 <em>application/octet-stream</em> MIME 类型与 <em>.unityweb</em> 扩展名相关联，可使用以下 <em>web.config</em> 文件：</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
        &lt;staticContent&gt;
    &lt;remove fileExtension=".unityweb" /&gt;
&lt;mimeMap fileExtension=".unityweb" mimeType="application/octet-stream" /&gt;
        &lt;/staticContent&gt;
    &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>

<p>请注意，配置文件会影响所有服务器子文件夹，因此只需在服务器根文件夹中设置 <em>.unityweb</em> 扩展名的 MIME 类型即可。</p>

<p>可选的 IIS 服务器配置步骤：</p>

<p>为了加快构建启动速度，可选择性使用以下配置文件。请注意，为了使用此设置，需要安装 Microsoft 的 <a href="http://www.iis.net/downloads/microsoft/url-rewrite">IIS URL 重写 IIS 模块</a>；否则，浏览器将抛出 500 内部服务器错误。</p>

<p>对于 gzip 压缩的构建，请将以下 <em>web.config</em> 文件放入 <em>Build</em> 子文件夹：</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
        &lt;staticContent&gt;
            &lt;remove fileExtension=".unityweb" /&gt;
            &lt;mimeMap fileExtension=".unityweb" mimeType="application/octet-stream" /&gt;
        &lt;/staticContent&gt;
        &lt;rewrite&gt;
            &lt;outboundRules&gt;
            &lt;rule name="Append gzip Content-Encoding header"&gt;
            &lt;match serverVariable="RESPONSE_Content-Encoding" pattern=".*" /&gt;
            &lt;conditions&gt;
                &lt;add input="{REQUEST_FILENAME}" pattern="\.unityweb$" /&gt;
            &lt;/conditions&gt;
            &lt;action type="Rewrite" value="gzip" /&gt;
            &lt;/rule&gt;
            &lt;/outboundRules&gt;
        &lt;/rewrite&gt;
    &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>

<p>对于 brotli 压缩的构建，请将以下 <em>web.config</em> 文件放入 <em>Build</em> 子文件夹：</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
        &lt;staticContent&gt;
            &lt;remove fileExtension=".unityweb" /&gt;
            &lt;mimeMap fileExtension=".unityweb" mimeType="application/octet-stream" /&gt;
        &lt;/staticContent&gt;
        &lt;rewrite&gt;
            &lt;outboundRules&gt;
            &lt;rule name="Append br Content-Encoding header"&gt;
            &lt;match serverVariable="RESPONSE_Content-Encoding" pattern=".*" /&gt;
            &lt;conditions&gt;
                &lt;add input="{REQUEST_FILENAME}" pattern="\.unityweb$" /&gt;
            &lt;/conditions&gt;
            &lt;action type="Rewrite" value="br" /&gt;
            &lt;/rule&gt;
            &lt;/outboundRules&gt;
        &lt;/rewrite&gt;
    &lt;/system.webServer&gt;
&lt;/configuration&gt;

</code></pre>

<p>请注意，当已在服务器目录的层级视图中的较高级别覆盖内容类型时，需要使用 <code>&lt;remove fileExtension=".unityweb" /&gt;</code> 行对此进行处理，否则可能导致服务器异常。</p>

<hr>

<ul>
<li><p><span class="page-edit">2017–05–24 Page amended with no <a href="DocumentationEditorialReview.html">editorial review</a>
</span></p></li>
<li><p><span class="page-history">5.6 版更新</span></p></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-building.html"></a></span><div class="tip">构建和运行 WebGL 项目</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="webgl-debugging.html"></a></span><div class="tip">Debugging and troubleshooting WebGL builds</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2019 Unity Technologies. Publication 2019.1</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
